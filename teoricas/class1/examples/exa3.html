<html>
<head>

    <script type="text/javascript">






        function connectDB(cb){

            return new Promise( (resolve, reject)=>{

                setTimeout(()=>{
                    resolve([1,2,3,4,5]);
                }, 1000);

            });
        }


        function query(cb){
            return new Promise((resolve, reject)=>{
                setTimeout(resolve, 1000);
            })
        }


        function render(cb){
            setTimeout(cb, 1000);
            return new Promise((resolve, reject)=>{
                asd();
                setTimeout(resolve, 1000);
            })
        }





        connectDB()
                .then((connection)=>{
                        console.log("conectado ", connection);
                        return query();
                    })
                .then(()=>{
                    console.log("query terminada");
                    return render();
                })
                .then(()=>{
                    console.log(" son tus datos");
                }, (err)=>{
                    console.log("algo salio mal ", err);
                })
        .catch((e)=>{
            console.log("algo se rompio: ", e);
        })




        /*
        function b(cb) {
            setTimeout(cb, 500);
        }


        function c(cb) {
            setTimeout(cb, 800);
        }

        console.log("init...");

        function factory(fncs) {

            fncs.forEach((f)=> {

                window[f.name] = function () {
                    console.log("contructor", f.pepe || null);
                    return new Promise((resolve, reject)=> {
                        f(resolve);
                    });
                };
            });
        }
        //factory([a, b, c]);
        //a();
        a.prototype.hi = "asdasd";
        var mya = new a();

*/
        /*a()
         .then( ()=>{
         console.log("termino A");
         return b();
         })
         .then( ()=>{
         console.log("Termino B");
         return c();
         })
         .then( ()=>{
         console.log("Termino C");
         })
         .catch( (e)=>{
         console.log("Catch: ", e);
         })

         */


    </script>
</head>
<body>
</body>
</html>